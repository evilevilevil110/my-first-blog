<html>
    <head>
        <title>Wesker's Django Blog testing</title>
    </head>
    <body>
            {% for post in posts %}
                <div>
                    <p>published: {{ post.published_date }}</p>
                    <h1><a href="">{{ post.title }}</a></h1>
                    <p>{{ post.text|linebreaksbr }}</p>
                </div>
            {% endfor %}

        <div id="chat-container"></div>
        <script src="https://cdn.jsdelivr.net/npm/openai/src/index.js"></script>
        <script>
                // 初始化 ChatGPT
                const chatGpt = new openai.ChatCompletion({
                      model: "gpt-3.5-turbo",
                      token: "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",
                      temperature: 0.6,
                    maxTokens: 50,
                    });

                // 处理用户输入和模型响应
                async function sendMessage(message) {
                const chatContainer = document.getElementById("chat-container");

                // 显示用户消息
                const userMessage = document.createElement("p");
                userMessage.innerText = "> " + message;
                chatContainer.appendChild(userMessage);

                // 发送用户消息到 ChatGPT
                const response = await chatGpt.complete(message);

               // 显示模型响应
               const modelMessage = document.createElement("p");
                     modelMessage.innerText = response.choices[0].message.content;
                     chatContainer.appendChild(modelMessage);
                     }
        </script>
        <input type="text" id="user-input" placeholder="请输入消息">
        <button onclick="sendMessage(document.getElementById('user-input').value)">发送</button>
    </body>

    <head>
          <title>ChatGPT小组件</title>
          <link rel="stylesheet" type="text/css" href="styles.css">
    </head>
    <body>
       <div id="chat-widget">
          <div id="chat-container"></div>
          <div id="input-container">
          <input type="text" id="user-input" placeholder="请输入消息">
          <button onclick="sendMessage()">发送</button>
          </div>
       </div>

  <script src="script.js"></script>
</body>
</html>